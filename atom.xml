<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Formyownçš„åšå®¢</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://formyown.github.io/"/>
  <updated>2020-07-29T08:23:34.920Z</updated>
  <id>http://formyown.github.io/</id>
  
  <author>
    <name>Formyown</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nettyè·å–å¹¶æ£€æŸ¥Websocketæ¡æ‰‹è¯·æ±‚</title>
    <link href="http://formyown.github.io/2020/07/29/Netty%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%A3%80%E6%9F%A5Websocket%E6%8F%A1%E6%89%8B%E8%AF%B7%E6%B1%82/"/>
    <id>http://formyown.github.io/2020/07/29/Nettyè·å–å¹¶æ£€æŸ¥Websocketæ¡æ‰‹è¯·æ±‚/</id>
    <published>2020-07-29T12:00:00.000Z</published>
    <updated>2020-07-29T08:23:34.920Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Nettyå¼€å‘WebsocketæœåŠ¡æ—¶ï¼Œé€šå¸¸éœ€è¦è§£ææ¥è‡ªå®¢æˆ·ç«¯è¯·æ±‚çš„URLã€Headersç­‰ç­‰ç›¸å…³å†…å®¹ï¼Œå¹¶åšç›¸å…³æ£€æŸ¥æˆ–å¤„ç†ã€‚æœ¬æ–‡å°†è®¨è®ºä¸¤ç§å®ç°æ–¹æ³•ã€‚</p><h1 id="æ–¹æ³•ä¸€åŸºäºhandshakecompleteè‡ªå®šä¹‰äº‹ä»¶"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸€åŸºäºhandshakecompleteè‡ªå®šä¹‰äº‹ä»¶"></a> æ–¹æ³•ä¸€ï¼šåŸºäºHandshakeCompleteè‡ªå®šä¹‰äº‹ä»¶</h1><blockquote><p>ç‰¹ç‚¹ï¼šä½¿ç”¨ç®€å•ã€æ ¡éªŒåœ¨æ¡æ‰‹æˆåŠŸä¹‹åã€å¤±è´¥ä¿¡æ¯å¯ä»¥é€šè¿‡Websocketå‘é€å›å®¢æˆ·ç«¯ã€‚</p></blockquote><h2 id="11-ä»nettyæºç å‡ºå‘"><a class="markdownIt-Anchor" href="#11-ä»nettyæºç å‡ºå‘"></a> 1.1 ä»nettyæºç å‡ºå‘</h2><p>ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬å°†nettyå†…ç½®çš„<code>WebSocketServerProtocolHandler</code>ä½œä¸ºWebsocketåè®®çš„ä¸»è¦å¤„ç†å™¨ã€‚é€šè¿‡ç ”ç©¶å…¶ä»£ç æˆ‘ä»¬äº†è§£åˆ°åœ¨æœ¬å¤„ç†å™¨è¢«æ·»åŠ åˆ°<code>Pipline</code>å<code>handlerAdded</code>æ–¹æ³•å°†ä¼šè¢«è°ƒç”¨ã€‚æ­¤æ–¹æ³•ç»è¿‡ç®€å•çš„æ£€æŸ¥åå°†<code>WebSocketHandshakeHandler</code>æ·»åŠ åˆ°äº†æœ¬å¤„ç†å™¨ä¹‹å‰ï¼Œç”¨äºå¤„ç†æ¡æ‰‹ç›¸å…³ä¸šåŠ¡ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“Websocketåè®®åœ¨æ¡æ‰‹æ—¶æ˜¯é€šè¿‡HTTP(S)åè®®è¿›è¡Œçš„ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>WebSocketHandshakeHandler</code>åº”è¯¥å°±æ˜¯å¤„ç†HTTPç›¸å…³çš„æ•°æ®çš„å§ï¼Ÿ</p><p>ä¸‹æ–¹ä»£ç ç»è¿‡ç²¾ç®€ï¼Œæ”¾å¿ƒé˜…è¯»ğŸ˜„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.netty.handler.codec.http.websocketx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketServerProtocolHandler</span> <span class="keyword">extends</span> <span class="title">WebSocketProtocolHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handlerAdded</span><span class="params">(ChannelHandlerContext ctx)</span> </span>&#123;</span><br><span class="line">        ChannelPipeline cp = ctx.pipeline();</span><br><span class="line">        <span class="keyword">if</span> (cp.get(WebSocketServerProtocolHandshakeHandler.class) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// Add the WebSocketHandshakeHandler before this one.</span></span><br><span class="line">            cp.addBefore(ctx.name(), WebSocketServerProtocolHandshakeHandler.class.getName(),</span><br><span class="line">                    <span class="keyword">new</span> WebSocketServerProtocolHandshakeHandler(serverConfig));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹çœ‹<code>WebSocketServerProtocolHandshakeHandler</code>éƒ½åšäº†ä»€ä¹ˆæ“ä½œã€‚</p><p><code>channelRead</code>æ–¹æ³•ä¼šå°è¯•æ¥æ”¶ä¸€ä¸ª<code>FullHttpRequest</code>å¯¹è±¡ï¼Œè¡¨ç¤ºæ¥è‡ªå®¢æˆ·ç«¯çš„HTTPè¯·æ±‚ï¼ŒéšåæœåŠ¡å™¨å°†ä¼šè¿›è¡Œæ¡æ‰‹ç›¸å…³æ“ä½œï¼Œæ­¤å¤„çœç•¥äº†æ¡æ‰‹å¤§éƒ¨åˆ†ä»£ç ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œé˜…è¯»ã€‚</p><p>å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨ç¡®è®¤æ¡æ‰‹æˆåŠŸåï¼Œ<code>channelRead</code>å°†ä¼šè°ƒç”¨ä¸¤æ¬¡<code>fireUserEventTriggered</code>ï¼Œæ­¤æ–¹æ³•å°†ä¼šè§¦å‘å…¶ä»–ï¼ˆåœ¨æ­¤å¤„ç†å™¨ä¹‹åï¼‰çš„å¤„ç†å™¨ä¸­åä¸ºçš„<code>serEventTriggered</code>æ–¹æ³•ã€‚å…¶ä¸­ä¸€ä¸ªæ–¹æ³•ä¼ å…¥äº†<code>WebSocketServerProtocolHandler</code>å¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¿å­˜äº†HTTPè¯·æ±‚ç›¸å…³ä¿¡æ¯ã€‚é‚£ä¹ˆè§£å†³æ–¹æ¡ˆé€æ¸æµ®å‡ºæ°´é¢ï¼Œé€šè¿‡ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶å³å¯å®ç°æ£€æŸ¥æ¡æ‰‹çš„HTTPè¯·æ±‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.netty.handler.codec.http.websocketx;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Handles the HTTP handshake (the HTTP Upgrade request) for &#123;<span class="doctag">@link</span> WebSocketServerProtocolHandler&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebSocketServerProtocolHandshakeHandler</span> <span class="keyword">extends</span> <span class="title">ChannelInboundHandlerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(<span class="keyword">final</span> ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> FullHttpRequest req = (FullHttpRequest) msg;</span><br><span class="line">        <span class="keyword">if</span> (isNotWebSocketPath(req)) &#123;</span><br><span class="line">            ctx.fireChannelRead(msg);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">if</span> (!future.isSuccess()) &#123;</span><br><span class="line">                </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                localHandshakePromise.trySuccess();</span><br><span class="line">                <span class="comment">// Kept for compatibility</span></span><br><span class="line">                ctx.fireUserEventTriggered(</span><br><span class="line">                        WebSocketServerProtocolHandler.ServerHandshakeStateEvent.HANDSHAKE_COMPLETE);</span><br><span class="line">                ctx.fireUserEventTriggered(</span><br><span class="line">                        <span class="keyword">new</span> WebSocketServerProtocolHandler.HandshakeComplete(</span><br><span class="line">                                req.uri(), req.headers(), handshaker.selectedSubprotocol()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            req.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="12-è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#12-è§£å†³æ–¹æ¡ˆ"></a> 1.2 è§£å†³æ–¹æ¡ˆ</h2><p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ã€‚é€šè¿‡æŠ›å‡ºå¼‚å¸¸å¯ä»¥ç»ˆæ­¢é“¾æ¥ï¼ŒåŒæ—¶å¯ä»¥åˆ©ç”¨<code>ctx</code>å‘å®¢æˆ·ç«¯ä»¥Websocketåè®®è¿”å›é”™è¯¯ä¿¡æ¯ã€‚å› ä¸ºæ­¤æ—¶æ¡æ‰‹å·²ç»å®Œæˆï¼Œæ‰€ä»¥è™½ç„¶è¿™ç§æ–¹æ¡ˆç®€å•çš„è¿‡åˆ†ï¼Œä½†æ˜¯æ•ˆç‡å¹¶ä¸é«˜ï¼Œè€—è´¹æœåŠ¡ç«¯èµ„æºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">DeviceDataPacket</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">userEventTriggered</span><span class="params">(ChannelHandlerContext ctx, Object evt)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (evt <span class="keyword">instanceof</span> WebSocketServerProtocolHandler.HandshakeComplete) &#123;</span><br><span class="line">            <span class="comment">// åœ¨æ­¤å¤„è·å–URLã€Headersç­‰ä¿¡æ¯å¹¶åšæ ¡éªŒï¼Œé€šè¿‡throwå¼‚å¸¸æ¥ä¸­æ–­é“¾æ¥ã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.userEventTriggered(ctx, evt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="13-channelinitializerå®ç°"><a class="markdownIt-Anchor" href="#13-channelinitializerå®ç°"></a> 1.3 ChannelInitializerå®ç°</h2><p>é™„ä¸ŠChannelåˆå§‹åŒ–ä»£ç ä½œä¸ºå‚è€ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> </span>&#123;</span><br><span class="line">        ch.pipeline()</span><br><span class="line">                .addLast(<span class="string">"http-codec"</span>, <span class="keyword">new</span> HttpServerCodec())</span><br><span class="line">                .addLast(<span class="string">"chunked-write"</span>, <span class="keyword">new</span> ChunkedWriteHandler())</span><br><span class="line">                .addLast(<span class="string">"http-aggregator"</span>, <span class="keyword">new</span> HttpObjectAggregator(<span class="number">8192</span>))</span><br><span class="line">                .addLast(<span class="string">"log-handler"</span>, <span class="keyword">new</span> LoggingHandler(LogLevel.WARN))</span><br><span class="line">                .addLast(<span class="string">"ws-server-handler"</span>, <span class="keyword">new</span> WebSocketServerProtocolHandler(endpointUri.getPath()))</span><br><span class="line">                .addLast(<span class="string">"server-handler"</span>, <span class="keyword">new</span> ServerHandler());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ–¹æ³•äºŒåŸºäºæ–°å¢å®‰å…¨æ£€æŸ¥å¤„ç†å™¨"><a class="markdownIt-Anchor" href="#æ–¹æ³•äºŒåŸºäºæ–°å¢å®‰å…¨æ£€æŸ¥å¤„ç†å™¨"></a> æ–¹æ³•äºŒï¼šåŸºäºæ–°å¢å®‰å…¨æ£€æŸ¥å¤„ç†å™¨</h1><blockquote><p>ç‰¹ç‚¹ï¼šä½¿ç”¨ç›¸å¯¹å¤æ‚ã€æ ¡éªŒåœ¨æ¡æ‰‹æˆåŠŸä¹‹å‰ã€å¤±è´¥ä¿¡æ¯å¯ä»¥é€šè¿‡HTTPè¿”å›å®¢æˆ·ç«¯ã€‚</p></blockquote><h2 id="21-è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#21-è§£å†³æ–¹æ¡ˆ"></a> 2.1 è§£å†³æ–¹æ¡ˆ</h2><p>ç¼–å†™ä¸€ä¸ªå…¥ç«™å¤„ç†å™¨ï¼Œæ¥æ”¶<code>FullHttpMessage</code>æ¶ˆæ¯ï¼Œåœ¨Websocketå¤„ç†å™¨ä¹‹å‰æ£€æµ‹æ‹¦æˆªè¯·æ±‚ä¿¡æ¯ã€‚ä¸‹é¢çš„ä¾‹å­ä¸»è¦åšäº†å››ä»¶äº‹æƒ…ï¼š</p><ol><li>ä»HTTPè¯·æ±‚ä¸­æå–å…³å¿ƒçš„æ•°æ®</li><li>å®‰å…¨æ£€æŸ¥</li><li>å°†ç»“æœå’Œå…¶ä»–æ•°æ®ç»‘å®šåœ¨Channel</li><li>è§¦å‘å®‰å…¨æ£€æŸ¥å®Œæ¯•è‡ªå®šä¹‰äº‹ä»¶</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityServerHandler</span> <span class="keyword">extends</span> <span class="title">ChannelInboundHandlerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ObjectMapper json = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> AttributeKey&lt;SecurityCheckComplete&gt; SECURITY_CHECK_COMPLETE_ATTRIBUTE_KEY =</span><br><span class="line">            AttributeKey.valueOf(<span class="string">"SECURITY_CHECK_COMPLETE_ATTRIBUTE_KEY"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(msg <span class="keyword">instanceof</span> FullHttpMessage)&#123;</span><br><span class="line">            <span class="comment">//extracts device information headers</span></span><br><span class="line">            HttpHeaders headers = ((FullHttpMessage) msg).headers();</span><br><span class="line">            String uuid = Objects.requireNonNull(headers.get(<span class="string">"device-connection-uuid"</span>));</span><br><span class="line">            String devDescJson = Objects.requireNonNull(headers.get(<span class="string">"device-description"</span>));</span><br><span class="line">            <span class="comment">//deserialize device description</span></span><br><span class="line">            DeviceDescription devDesc = json.readValue(devDescJson, DeviceDescriptionWithCertificate.class);</span><br><span class="line">            <span class="comment">//check ......</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            SecurityCheckComplete complete = <span class="keyword">new</span> SecurityCheckComplete(uuid, devDesc);</span><br><span class="line">            ctx.channel().attr(SECURITY_CHECK_COMPLETE_ATTRIBUTE_KEY).set(complete);</span><br><span class="line">            ctx.fireUserEventTriggered(complete);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//other protocols</span></span><br><span class="line">        <span class="keyword">super</span>.channelRead(ctx, msg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityCheckComplete</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String connectionUUID;</span><br><span class="line">        <span class="keyword">private</span> DeviceDescription deviceDescription;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸šåŠ¡é€»è¾‘å¤„ç†å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ç»„åˆè‡ªå®šä¹‰çš„å®‰å…¨æ£€æŸ¥äº‹ä»¶å’ŒWebsocketæ¡æ‰‹å®Œæˆäº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨å®‰å…¨æ£€æŸ¥åè¿›è¡Œä¸‹ä¸€æ­¥è‡ªå®šä¹‰ä¸šåŠ¡æ£€æŸ¥ï¼Œåœ¨æ¡æ‰‹å®Œæˆåå‘é€è‡ªå®šä¹‰å†…å®¹ç­‰ç­‰ï¼Œå°±çœ‹å„ä½åŒå­¦è‡ªç”±å‘æŒ¥äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">DeviceDataPacket</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> AttributeKey&lt;DeviceConnection&gt; </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">userEventTriggered</span><span class="params">(ChannelHandlerContext ctx, Object evt)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (evt <span class="keyword">instanceof</span> SecurityCheckComplete)&#123;</span><br><span class="line">            log.info(<span class="string">"Security check has passed"</span>);</span><br><span class="line">            SecurityCheckComplete complete = (SecurityCheckComplete) evt;</span><br><span class="line">            listener.beforeConnect(complete.getConnectionUUID(), complete.getDeviceDescription());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (evt <span class="keyword">instanceof</span> WebSocketServerProtocolHandler.HandshakeComplete) &#123;</span><br><span class="line">            log.info(<span class="string">"Handshake has completed"</span>);</span><br><span class="line">            SecurityCheckComplete complete = ctx.channel().attr(SecurityServerHandler.SECURITY_CHECK_COMPLETE_ATTRIBUTE_KEY).get();</span><br><span class="line">            DeviceDataServer.<span class="keyword">this</span>.listener.postConnect(complete.getConnectionUUID(),</span><br><span class="line">                    <span class="keyword">new</span> DeviceConnection(ctx.channel(), complete.getDeviceDescription()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.userEventTriggered(ctx, evt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="22-channelinitializerå®ç°"><a class="markdownIt-Anchor" href="#22-channelinitializerå®ç°"></a> 2.2 ChannelInitializerå®ç°</h2><p>é™„ä¸ŠChannelåˆå§‹åŒ–ä»£ç ä½œä¸ºå‚è€ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> </span>&#123;</span><br><span class="line">        ch.pipeline()</span><br><span class="line">                .addLast(<span class="string">"http-codec"</span>, <span class="keyword">new</span> HttpServerCodec())</span><br><span class="line">                .addLast(<span class="string">"chunked-write"</span>, <span class="keyword">new</span> ChunkedWriteHandler())</span><br><span class="line">                .addLast(<span class="string">"http-aggregator"</span>, <span class="keyword">new</span> HttpObjectAggregator(<span class="number">8192</span>))</span><br><span class="line">                .addLast(<span class="string">"log-handler"</span>, <span class="keyword">new</span> LoggingHandler(LogLevel.WARN))</span><br><span class="line">                .addLast(<span class="string">"security-handler"</span>, <span class="keyword">new</span> SecurityServerHandler())</span><br><span class="line">                .addLast(<span class="string">"ws-server-handler"</span>, <span class="keyword">new</span> WebSocketServerProtocolHandler(endpointUri.getPath()))</span><br><span class="line">                .addLast(<span class="string">"packet-codec"</span>, <span class="keyword">new</span> DataPacketCodec())</span><br><span class="line">                .addLast(<span class="string">"server-handler"</span>, <span class="keyword">new</span> ServerHandler());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>ä¸Šè¿°ä¸¤ç§æ–¹å¼åˆ†åˆ«åœ¨æ¡æ‰‹å®Œæˆåå’Œæ¡æ‰‹ä¹‹å‰æ‹¦æˆªæ£€æŸ¥ï¼›å®ç°å¤æ‚åº¦å’Œæ€§èƒ½ç•¥æœ‰ä¸åŒï¼Œå¯ä»¥é€šè¿‡å…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚</p><p>Nettyå¢å¼ºäº†è´£ä»»é“¾æ¨¡å¼ï¼Œä½¿ç”¨<code>userEvent</code>ä¼ é€’è‡ªå®šä¹‰äº‹ä»¶ä½¿å¾—å„ä¸ªå¤„ç†å™¨ä¹‹é—´å‡å°‘è€¦åˆï¼Œæ›´ä¸“æ³¨äºä¸šåŠ¡ã€‚ä½†æ˜¯ã€ç›¸æ¯”äºæµåŠ¨äºå„ä¸ªå¤„ç†å™¨ä¹‹é—´çš„&quot;ä¸»çº¿&quot;æ•°æ®æ¥è¯´ï¼Œ<code>userEvent</code>ä¼ é€’çš„&quot;æ”¯çº¿&quot;æ•°æ®å¾€å¾€ä¸å—å…³æ³¨ã€‚é€šè¿‡é˜…è¯»Nettyå†…ç½®çš„å„ç§å¤„ç†å™¨æºç ï¼Œæ¢ç´¢å…¶äº§ç”Ÿçš„äº‹ä»¶ï¼ŒåŒæ—¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­åŠ ä»¥å–„ç”¨ï¼Œå¯ä»¥å‡å°‘å†—ä½™ä»£ç ã€‚å¦å¤–åœ¨å¼€å‘è‡ªå®šä¹‰çš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œåº”è¯¥ç§¯æåˆ©ç”¨<code>userEvent</code>ä¼ é€’äº‹ä»¶æ•°æ®ï¼Œé™ä½å„æ¨¡å—ä¹‹é—´ä»£ç è€¦åˆã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ä½¿ç”¨Nettyå¼€å‘WebsocketæœåŠ¡æ—¶ï¼Œé€šå¸¸éœ€è¦è§£ææ¥è‡ªå®¢æˆ·ç«¯è¯·æ±‚çš„URLã€Headersç­‰ç­‰ç›¸å…³å†…å®¹ï¼Œå¹¶åšç›¸å…³æ£€æŸ¥æˆ–å¤„ç†ã€‚æœ¬æ–‡å°†è®¨è®ºä¸¤ç§å®ç°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ–¹æ³•ä¸€åŸºäºhandshakecompleteè‡ªå®šä¹‰äº‹ä»¶&quot;&gt;&lt;a class=&quot;markdown
      
    
    </summary>
    
      <category term="Netty" scheme="http://formyown.github.io/categories/Netty/"/>
    
      <category term="Websocket" scheme="http://formyown.github.io/categories/Netty/Websocket/"/>
    
    
      <category term="Netty" scheme="http://formyown.github.io/tags/Netty/"/>
    
      <category term="Websocket" scheme="http://formyown.github.io/tags/Websocket/"/>
    
  </entry>
  
  <entry>
    <title>Decimaljsåœ¨class-transformerä¸­å¼‚å¸¸çš„è§£å†³æ–¹æ¡ˆ</title>
    <link href="http://formyown.github.io/2019/12/17/Decimaljs%E5%9C%A8class-transformer%E4%B8%AD%E5%BC%82%E5%B8%B8%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://formyown.github.io/2019/12/17/Decimaljsåœ¨class-transformerä¸­å¼‚å¸¸çš„è§£å†³æ–¹æ¡ˆ/</id>
    <published>2019-12-17T03:07:09.000Z</published>
    <updated>2020-07-29T08:23:34.916Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a class="markdownIt-Anchor" href="#èƒŒæ™¯"></a> èƒŒæ™¯</h2><p>åœ¨ä½¿ç”¨<a href="https://github.com/typestack/class-transformer" target="_blank" rel="noopener"><code>class-transformer</code></a>è¿›è¡Œå¯¹è±¡è½¬æ¢å¹¶ä¸”é‡åˆ°ç±»å‹ä¸ºDecimalçš„æ•°æ®æ—¶å·¥ä½œä¸æ­£å¸¸</p><h2 id="å¼‚å¸¸å¤ç°"><a class="markdownIt-Anchor" href="#å¼‚å¸¸å¤ç°"></a> å¼‚å¸¸å¤ç°</h2><p>æˆ‘ä»¬æœ‰ä»¥ä¸‹ç±»å‹ï¼Œæ˜¯ç›®æ ‡å¯¹è±¡ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> OrderItemTransfer &#123;</span><br><span class="line">    <span class="comment">///å¿½ç•¥å…¶ä»–æ— å…³å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Expose</span>()</span><br><span class="line">    price: Decimal;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠï¼Œæºå¯¹è±¡å®šä¹‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> OrderItem &#123;</span><br><span class="line">    <span class="comment">///å¿½ç•¥å…¶ä»–æ— å…³å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">"decimal"</span>,</span><br><span class="line">        precision: <span class="number">5</span>, scale: <span class="number">2</span>, <span class="keyword">default</span>: <span class="number">0</span>,</span><br><span class="line">        transformer: <span class="keyword">new</span> DecimalTransformer()</span><br><span class="line">    &#125;)</span><br><span class="line">    price: Decimal;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°† <code>OrderItem</code> ç±»å‹çš„å¯¹è±¡è½¬æ¢åˆ° <code>OrderItemTransfer</code> ç±»å‹ã€‚äºæ˜¯æœ‰ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> transfer = plainToClass(OrderItemTransfer, entity);</span><br><span class="line"><span class="comment">//å‘ç”Ÿå¼‚å¸¸: Error</span></span><br><span class="line"><span class="comment">//Error: [DecimalError] Invalid argument: undefined</span></span><br></pre></td></tr></table></figure><h2 id="å¼‚å¸¸åˆ†æ"><a class="markdownIt-Anchor" href="#å¼‚å¸¸åˆ†æ"></a> å¼‚å¸¸åˆ†æ</h2><p>é€šè¿‡è¿½è¸ªè°ƒç”¨æ ˆå‘ç°å¦‚ä¸‹ä¿¡æ¯:</p><p><img src="/2019/12/17/Decimaljsåœ¨class-transformerä¸­å¼‚å¸¸çš„è§£å†³æ–¹æ¡ˆ/stack.png" alt="stack"></p><p>æ‰¾åˆ°è°ƒç”¨<code>Decimal</code>æ„é€ å‡½æ•°çš„å…·ä½“ä»£ç </p><p><img src="/2019/12/17/Decimaljsåœ¨class-transformerä¸­å¼‚å¸¸çš„è§£å†³æ–¹æ¡ˆ/caller.png" alt="caller"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨äº†<code>Decimal</code>æ„é€ å‡½æ•°ï¼Œç„¶è€ŒDecimalçš„æ„é€ å‡½æ•°å¹¶ä¸æ”¯æŒå‚æ•°æ˜¯<code>null</code>/<code>undefined</code>ä»è€Œå¼•å‘äº†å¼‚å¸¸ã€‚</p><p><code>plainToClass</code>è¿™ä¸ªæ–¹æ³•çš„è®¾è®¡æ˜¯é’ˆå¯¹<code>plain object</code>åˆ°<code>class</code>çš„è½¬æ¢ï¼Œé€šè¿‡ä¸‹å›¾å¯è§ï¼Œä»–çš„ç±»å‹åˆ¤æ–­ç›¸å¯¹ç®€å•</p><p><img src="/2019/12/17/Decimaljsåœ¨class-transformerä¸­å¼‚å¸¸çš„è§£å†³æ–¹æ¡ˆ/type-check.png" alt="type-check"></p><p>åœ¨åˆ¤æ–­å¯¹è±¡ç±»å‹æ˜¯<code>object</code>ä¹‹åå¹¶æ²¡æœ‰è¿›ä¸€æ­¥åˆ¤æ–­æ„é€ å‡½æ•°ç›¸å…³ä¿¡æ¯ï¼ˆé’ˆå¯¹<code>plain object</code>çš„è®¾è®¡å¹¶ä¸éœ€è¦åˆ¤æ–­ï¼Œå› ä¸ºè¿™ç§æƒ…å†µå¹¶ä¸å­˜åœ¨è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼‰ã€‚ä½†æ˜¯è¿™ç§ç‰¹æ€§æ°å·§å¦¨ç¢äº†æˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼äº<code>Decimal</code>è¿™ç§æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»å‹ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ¡ˆ"></a> è§£å†³æ–¹æ¡ˆ</h2><p>å…¶å®2017å¹´å·²ç»æœ‰äººæè¿‡<a href="https://github.com/typestack/class-transformer/issues/92" target="_blank" rel="noopener">è¿™ä¸ªé—®é¢˜</a>ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µç¡®å®æ˜¯æ­¤æ–¹æ³•çš„è®¾è®¡æƒ…å†µä¹‹å¤–ï¼Œè€Œä¸”å®˜æ–¹ä¹Ÿå¹¶æ²¡æœ‰ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚ä»…æœ‰æŸä½ç”¨æˆ·æä¾›çš„ä¸€ä¸ªä¸´æ—¶æ€§çš„è§£å†³æ–¹æ¡ˆ:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (value[valueKey] <span class="keyword">instanceof</span> <span class="built_in">Function</span>) &#123;</span><br><span class="line">    subValue = value[valueKey](); --&gt; Comment out <span class="keyword">this</span> line</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆçœŸçš„èƒ½è§£å†³é—®é¢˜ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯ï¼šå¯ä»¥ï¼Œä½†ä¸ä¼˜é›…ã€‚</p><p>ä¸å…¶æäº¤prç»™<code>class-transformer</code>ä¸å¦‚ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥è§£å†³ï¼Œé‚£å°±æ˜¯ä»<code>Decimal.js</code>ä¸‹æ‰‹ã€‚ç”±äºé—®é¢˜å‘ç”Ÿåœ¨Decimalç±»å‹æ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä½•ä¸æ‹“å±•ä»¥ä¸‹è¿™ä¸ªç±»å‹å‘¢ï¼Ÿ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> DecimalPatch &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">v</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!v) v = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> d = <span class="keyword">new</span> Decimal(v) <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">        <span class="keyword">delete</span> d.constructor;</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, d);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½è¦é—®å‡ ä¸ªé—®é¢˜ï¼š</p><p>ä¸ºä»€ä¹ˆä¸ç”¨<code>extends</code>å‘¢ï¼Ÿç­”æ¡ˆæ˜¯<code>class-transformer</code>æ‹¿åˆ°çš„ç±»å‹ä»æ˜¯Decimalçš„æ„é€ å‡½æ•°</p><p>ä¸ºä»€ä¹ˆè¦<code>delete d.constructor</code>å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é˜²æ­¢<code>plainToClass</code>å†æ¬¡è°ƒç”¨<code>constructor</code></p><p>(è¿™ä¸ªæ–¹æ³•å¾ˆè¿·ï¼Œå®ƒä¼šè°ƒç”¨æºå¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•æ±‚å€¼èµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡ï¼Œçœ‹ä¼¼æ˜¯ä¸ºäº†è°ƒç”¨<code>getter</code>ä½œç”¨çš„å‡½æ•°ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åˆ¤æ–­èƒ½åŠ›ï¼Œå°±è¿æ„é€ å‡½æ•°ä¹Ÿä¸æ”¾è¿‡QAQã€‚ã€‚ã€‚)</p><p>ç°åœ¨ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> OrderItem &#123;</span><br><span class="line">    <span class="comment">///å¿½ç•¥å…¶ä»–æ— å…³å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">"decimal"</span>,</span><br><span class="line">        precision: <span class="number">5</span>, scale: <span class="number">2</span>, <span class="keyword">default</span>: <span class="number">0</span>,</span><br><span class="line">        transformer: <span class="keyword">new</span> DecimalTransformer() <span class="comment">//è¿˜è®°å¾—è¿™é‡Œä¹ˆï¼Œ</span></span><br><span class="line">        <span class="comment">//è§£é‡Šä¸€ä¸‹ï¼ŒDecimalTransformeræ˜¯ç”¨äºå°†æ•°æ®åº“æŸ¥è¯¢å‡ºçš„æ•°æ®è½¬æ¢ä¸ºè‡ªå®šä¹‰æ•°æ®</span></span><br><span class="line">    &#125;)</span><br><span class="line">    price: Decimal;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒé•¿è¿™ä¸ªæ ·å­</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> DecimalTransformer <span class="keyword">implements</span> ValueTransformer &#123;</span><br><span class="line">    to(data: Decimal): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">from</span>(data: <span class="built_in">string</span>): Decimal &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Decimal(data); <span class="comment">//è¿™é‡Œå®ä¾‹åŒ–äº†å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸Šè¿°ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>(data: <span class="built_in">string</span>): DecimalPatch &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DecimalPatch(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œ<code>entity</code>ä¸­çš„æ•°æ®å®é™…ç±»å‹æ˜¯<code>DecimalPatch</code>ï¼Œå¹¶ä¸”å·¥ä½œä¸€åˆ‡æ­£å¸¸</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#èƒŒæ™¯&quot;&gt;&lt;/a&gt; èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨&lt;a href=&quot;https://github.com/typestack/class-transformer&quot; target=&quot;_bla
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://formyown.github.io/categories/JavaScript/"/>
    
      <category term="TypeScript" scheme="http://formyown.github.io/categories/JavaScript/TypeScript/"/>
    
    
      <category term="Decimal.js" scheme="http://formyown.github.io/tags/Decimal-js/"/>
    
      <category term="class-transformer" scheme="http://formyown.github.io/tags/class-transformer/"/>
    
  </entry>
  
  <entry>
    <title>Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°</title>
    <link href="http://formyown.github.io/2019/02/16/Ethereum%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%AD%BE%E5%90%8D%E9%AA%8C%E8%AF%81%E7%AE%97%E6%B3%95Java%E5%AE%9E%E7%8E%B0/"/>
    <id>http://formyown.github.io/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/</id>
    <published>2019-02-16T15:41:00.000Z</published>
    <updated>2020-07-29T08:23:34.920Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼€å§‹ä¹‹å‰"><a class="markdownIt-Anchor" href="#å¼€å§‹ä¹‹å‰"></a> å¼€å§‹ä¹‹å‰</h2><p>åœ¨éªŒè¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿™äº›åŸºæœ¬çš„ä¿¡æ¯: ç­¾åï¼ŒåŸæ–‡ï¼Œåœ°å€ï¼ˆæˆ–è€…å…¬é’¥ï¼‰</p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/lizi.jpg" alt></p><p>Sig: <code>0x5f3c4ab309427d25cdc34a41cb432610c6c817e76ce9aec0c9336365063687ff29c92963edd6935f365d5f28c146f227881b626c7db18e87b9baf2089729741b1c</code></p><p>Message: <code>ç­¾åè¿™æ®µæ–‡å­—ä»¥éªŒè¯ä½ æ˜¯è¿™ä¸ªè´¦æˆ·çš„æŒæœ‰è€…ã€‚</code></p><p>Address: <code>0x1c52C6F743351fC9b97AE4Fe32194A588398FE69</code></p><h2 id="å¤„ç†åŸæ–‡"><a class="markdownIt-Anchor" href="#å¤„ç†åŸæ–‡"></a> å¤„ç†åŸæ–‡</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†åŸä¸ºå¤„ç†ä¸ºHashå½¢å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MessageHash = keccak256(prefix + message)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>prefix</code>æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ç­¾ååœ¨ç”Ÿæˆçš„æ—¶å€™æ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚åœ¨Ethereumå®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå…³äº<code>eth_sig</code>çš„æè¿°æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/eth_sig.png" alt="åŸæ–‡åœ°å€: https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign"></p><p>å¯ç–‘çš„åœ°æ–¹æ˜¯<code>sign(keccak256(&quot;\x19Ethereum Signed Message:\n&quot; + len(message) + message)))</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨messageä¹‹å‰æ·»åŠ äº†ä¸€æ®µè¯ï¼š<code>&quot;\x19Ethereum Signed Message:\n&quot; + len(message)</code>ã€‚çœŸæ­£è¢«ç­¾åçš„æ•°æ®ä¸æ˜¯å•çº¯çš„messageï¼Œè€Œæ˜¯åœ¨messageä¹‹å‰æ·»åŠ äº†è¿™å¥è¯ï¼ˆprefixï¼‰åæ•´ä½“åšäº†hashè¿ç®—ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—hashçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦ç…§åšã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String message = <span class="string">"ç­¾åè¿™æ®µæ–‡å­—ä»¥éªŒè¯ä½ æ˜¯è¿™ä¸ªè´¦æˆ·çš„æŒæœ‰è€…ã€‚"</span>;</span><br><span class="line"><span class="keyword">byte</span>[] msgBuffer = message.getBytes(<span class="string">"UTF-8"</span>);</span><br><span class="line"><span class="keyword">byte</span>[] msgPrefix =  (<span class="string">"\u0019Ethereum Signed Message:\n"</span> + msgBuffer.length).getBytes(<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></table></figure><p>ç°åœ¨å·²ç»å°†åŸå§‹æ¶ˆæ¯å’Œprefixéƒ½è½¬æ¢æˆäº†å­—èŠ‚æ•°ç»„çš„å½¢å¼ï¼Œæ¥ä¸‹æ¥éœ€è¦æŠŠè¿™ä¸¤éƒ¨åˆ†æ‹¼æ¥èµ·æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] msg = <span class="keyword">new</span> <span class="keyword">byte</span>[msgPrefix.length + msgBuffer.length];</span><br><span class="line">System.arraycopy(msgPrefix, <span class="number">0</span>, msg, <span class="number">0</span>, msgPrefix.length);</span><br><span class="line">System.arraycopy(msgBuffer, <span class="number">0</span>, msg, msgPrefix.length, msgBuffer.length);</span><br></pre></td></tr></table></figure><p>æ¯«æ— éš¾åº¦ï¼Œåˆ©ç”¨<code>System.arraycopy</code>æ–¹æ³•å¯ä»¥è½»æ¾å¾—æ‹·è´æ•°ç»„ï¼Œå¾—åˆ°<code>msg</code>åï¼Œå°±å¯ä»¥è®¡ç®—<code>keccak256(msg)</code>äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.ethereum.crypto.cryptohash.Keccak256;</span><br><span class="line"></span><br><span class="line">Keccak256 keccak256 = <span class="keyword">new</span> Keccak256();</span><br><span class="line"><span class="keyword">byte</span>[] msgHash = keccak256.copy().digest(msg);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†<code>ethereumj</code>çš„åŠ å¯†åŒ…ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„åŒ…æˆ–è€…è‡ªå·±å®ç°keccak256ã€‚</p><blockquote><p>ç»“æœï¼šmsgHash = 767cab717f7e9a3f56765c89f39887b9934a8e78ad4d0a2fb1fd0d009bb7012b (32å­—èŠ‚ï¼ŒHEX)</p></blockquote><p>å¥½äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢<code>msgHash</code>å·²ç»æ‹¿åˆ°äº†ï¼Œæ¥ä¸‹æ¥å°±è¦å¤„ç†ç­¾åäº†</p><h2 id="å¤„ç†ç­¾å"><a class="markdownIt-Anchor" href="#å¤„ç†ç­¾å"></a> å¤„ç†ç­¾å</h2><p>å†æ¥çœ‹ä¸€çœ¼ç­¾å: <code>0x5f3c4ab309427d25cdc34a41cb432610c6c817e76ce9aec0c9336365063687ff29c92963edd6935f365d5f28c146f227881b626c7db18e87b9baf2089729741b1c</code><br>é•¿åº¦æ˜¯65ä¸ªå­—èŠ‚ã€‚</p><p>ç„¶è€Œè¿™æ®µç­¾åæ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ <code>r</code>, <code>s</code>, <code>v</code>ã€‚<code>r</code>å’Œ<code>s</code>é•¿åº¦éƒ½æ˜¯32å­—èŠ‚ï¼Œ<code>v</code>æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚ä¸‹é¢çš„ä»£ç å°†ä¼šå§ç­¾åæ‹†åˆ†æˆä¸Šè¿°éƒ¨åˆ†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.bouncycastle.util.encoders.Hex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span>[] r = Hex.decode(sig.substring(<span class="number">0</span>, <span class="number">64</span>));</span><br><span class="line"><span class="keyword">byte</span>[] s = Hex.decode(sig.substring(<span class="number">64</span>, <span class="number">128</span>));</span><br><span class="line"><span class="keyword">byte</span> v = Hex.decode(sig.substring(<span class="number">128</span>, <span class="number">130</span>))[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœï¼š<br>r = 5f3c4ab309427d25cdc34a41cb432610c6c817e76ce9aec0c9336365063687ff (32å­—èŠ‚ï¼ŒHEX)<br>s = 29c92963edd6935f365d5f28c146f227881b626c7db18e87b9baf2089729741b (32å­—èŠ‚ï¼ŒHEX)<br>v = 28 (10è¿›åˆ¶)</p></blockquote><p>å¾—åˆ°è¿™ä¸‰ä¸ªæ•°æ®ä»¥åï¼Œå°±å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªç¯èŠ‚è¾£</p><h2 id="ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•"></a> ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•</h2><blockquote><p>è‹¥æœä½ ä¸æƒ³äº†è§£æˆ–è€…å·²ç»äº†è§£æ¤­åœ†æ›²çº¿çš„ç»†èŠ‚ï¼Œå¯ä»¥è·³è¿‡æ­¤å°èŠ‚</p></blockquote><h3 id="ecdsaecå’Œsecp256k1"><a class="markdownIt-Anchor" href="#ecdsaecå’Œsecp256k1"></a> ECDSAï¼ŒECï¼Œå’ŒSecp256k1</h3><p>ä»¥å¤ªåŠä½¿ç”¨çš„æ˜¯<code>Elliptic Curve Digital Signature Algorithm (ECDSAï¼Œæ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•)</code>è¿›è¡Œç­¾åã€‚å¯æ˜¯<code>Elliptic Curve(ECï¼Œæ¤­åœ†æ›²çº¿)</code>åˆæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ<br>ä¸ºäº†æœ‰ä¸€ä¸ªç›´è§‚æ„Ÿå—ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•ä½†æ˜¯é€šç”¨çš„æ–¹ç¨‹</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">y^2 = x^3 + ax + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span></p><p>å…¶ä¸­<code>a</code>éƒ½æ˜¯å¸¸æ•°<code>b</code>ï¼Œä¸åŒçš„å–å€¼ä¼šå½¢æˆä¸åŒçš„æ›²çº¿æ–¹ç¨‹</p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/ecs.png" alt="å„ç§ECçš„å½¢çŠ¶"></p><blockquote><p>åœ¨è¿™é‡Œhttps://www.desmos.com/calculator/9vv5aklebfï¼Œä½ å¯ä»¥è°ƒæ•´<code>a</code>å’Œ<code>b</code>çš„å€¼æ¥è§‚å¯Ÿä¸åŒçš„å–å€¼</p></blockquote><p>è¿™äº›æ–¹ç¨‹å’ŒåŠ å¯†æœ‰ä»€ä¹ˆè”ç³»ä¹ˆï¼Ÿå½“ç„¶ï¼ä¸è¿‡é¦–å…ˆè¦äº†è§£ä»€ä¹ˆæ˜¯<code>ç¾¤</code>ä»¥åŠ<code>åŠ æ³•</code></p><h4 id="ç¾¤groups-å’Œé˜¿è´å°”ç¾¤"><a class="markdownIt-Anchor" href="#ç¾¤groups-å’Œé˜¿è´å°”ç¾¤"></a> ç¾¤(Groups) å’Œé˜¿è´å°”ç¾¤</h4><p>ç¾¤ï¼šè‹¥ <strong>éç©º</strong> é›†åˆ ğ”¾, å®šä¹‰åœ¨ ğ”¾ ä¸Šçš„ä¸€ä¸ªäºŒå…ƒè¿ç®—ï¼šåŠ æ³•ï¼Œç¬¦å·<code>+</code>è¡¨ç¤ºï¼Œæ»¡è¶³ï¼š</p><ol><li><p>å°é—­æ€§ï¼šå­˜åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>âˆˆ</mo><mi>ğ”¾</mi></mrow><annotation encoding="application/x-tex">a,b\inğ”¾</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">G</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>)</mo><mo>âˆˆ</mo><mi>ğ”¾</mi></mrow><annotation encoding="application/x-tex">(a+b)\inğ”¾</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">G</span></span></span></span></p></li><li><p>ç»“åˆå¾‹ï¼šå­˜åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo>âˆˆ</mo><mi>ğ”¾</mi></mrow><annotation encoding="application/x-tex">a,b,c\inğ”¾</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">G</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>)</mo><mo>+</mo><mi>c</mi><mo>=</mo><mi>a</mi><mo>+</mo><mo>(</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(a+b)+c = a+(b+c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mclose">)</span></span></span></span></p></li><li><p>äº¤æ¢å¾‹ï¼šå­˜åœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>âˆˆ</mo><mi>ğ”¾</mi></mrow><annotation encoding="application/x-tex">a,b\inğ”¾</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">G</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a+b = b+a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span></p></li><li><p>å•ä½å…ƒï¼šé›†åˆ ğ”¾ ä¸­æœ‰ä¸€ä¸ªç¡®åˆ‡çš„å€¼å³å•ä½å…ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ï¼Œä½¿å¾— <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>+</mo><mn>0</mn><mo>=</mo><mn>0</mn><mo>+</mo><mi>a</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a+0=0+a=a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span></p></li><li><p>é€†å…ƒï¼šé›†åˆ ğ”¾ ä¸­æ¯ä¸ªæˆå‘˜éƒ½æœ‰å…¶ç›¸åæ•°ï¼Œå³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a+b=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></p></li></ol><p>åˆ™<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>ğ”¾</mi><mo separator="true">,</mo><mo>+</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(ğ”¾,+)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathbb">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">+</span><span class="mclose">)</span></span></span></span>ç§°ä¸ºä¸€ä¸ªç¾¤ï¼Œæˆ–è€…åŠ æ³•ç¾¤ä¹Ÿå«é˜¿è´å°”ç¾¤ã€‚</p><h4 id="æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•"></a> æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•</h4><p>å‡è®¾æ›²çº¿<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">y^2 = x^3 + 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>ä¸Šæœ‰ä¸¤ä¸ªç‚¹ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P = (x_1, y_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">Q = (x_2, y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/ec_pq.png" alt="P,Q"></p><p>è¿‡ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span> åšä¸€æ¡ç›´çº¿ï¼Œç›¸äº¤äºæ›²çº¿ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo mathvariant="normal">â€²</mo></msup></mrow><annotation encoding="application/x-tex">R&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/ec_pqr.png" alt="P,Q,R"></p><p>è¿‡ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo mathvariant="normal">â€²</mo></msup></mrow><annotation encoding="application/x-tex">R&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> åš <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span> è½´å‚çº¿å¹¶ç›¸äº¤äºæ›²çº¿ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span></p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/ec_pqrr'.png" alt="P,Q,R,R'"></p><p>é‚£ä¹ˆ <strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>+</mo><mi>Q</mi><mo>=</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">P + Q = R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span></strong></p><h5 id="å¦‚ä½•è®¡ç®—-p-q"><a class="markdownIt-Anchor" href="#å¦‚ä½•è®¡ç®—-p-q"></a> å¦‚ä½•è®¡ç®— <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>+</mo><mi>Q</mi></mrow><annotation encoding="application/x-tex">P + Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span></h5><blockquote><p>è®¿é—® <a href="https://www.desmos.com/calculator/fttnxuzryp" target="_blank" rel="noopener">https://www.desmos.com/calculator/fttnxuzryp</a> æŸ¥çœ‹æ›´å¤šå…³äºè®¡ç®—çš„ç»†èŠ‚</p></blockquote><p>æˆ‘ä»¬å·²ç»çŸ¥é“äº† <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span>,åˆ<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P = (x_1, y_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">Q = (x_2, y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br>é‚£ä¹ˆè¿‡è¿™ä¸¤ç‚¹ç›´çº¿çš„æ–œç‡<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mo>(</mo><msub><mi>y</mi><mn>2</mn></msub><mo>âˆ’</mo><msub><mi>y</mi><mn>1</mn></msub><mo>)</mo><mi mathvariant="normal">/</mi><mo>(</mo><msub><mi>x</mi><mn>2</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>1</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">k = (y_2-y_1)/(x_2-x_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>è®¾ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>3</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">R=(x_3,y_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>3</mn></msub><mo>=</mo><msup><mi>k</mi><mn>2</mn></msup><mo>âˆ’</mo><msub><mi>x</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_3 = k^2 - x_1 - x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>3</mn></msub><mo>=</mo><mi>k</mi><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>3</mn></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y_3 = k(x_1 - x_3) - y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><h4 id="æ¤­åœ†æ›²çº¿å’Œé˜¿è´å°”ç¾¤"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿å’Œé˜¿è´å°”ç¾¤"></a> æ¤­åœ†æ›²çº¿å’Œé˜¿è´å°”ç¾¤</h4><p>ä¸Šè¿°å¯¹äºæ¤­åœ†æ›²çº¿ä¸ŠåŠ æ³•çš„æè¿°å’Œè§£æä½¿æˆ‘ä»¬å¾—çŸ¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>éƒ½æ˜¯æ›²çº¿ä¸Šçš„ç‚¹ï¼Œä¸”æ»¡è¶³é˜¿è´å°”ç¾¤çš„å®šä¹‰ã€‚ä¸éš¾è¯æ˜æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•æ˜¯ä¸€ä¸ªé˜¿è´å°”ç¾¤ã€‚</p><h4 id="æ¤­åœ†æ›²çº¿ä¸Šçš„ä¹˜æ³•"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿ä¸Šçš„ä¹˜æ³•"></a> æ¤­åœ†æ›²çº¿ä¸Šçš„ä¹˜æ³•</h4><p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•è®¡ç®—åŠ æ³•ï¼Œé‚£ä¹ˆå¦‚ä½•è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">2P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼å‘¢ï¼Ÿ<br>å…¶å®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">2P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>å°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>+</mo><mi>P</mi></mrow><annotation encoding="application/x-tex">P + P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>ã€‚è¿˜è®°å¾—è¿‡ä¸¤ç‚¹åšç›´çº¿ä¹ˆï¼Ÿè¿™é‡Œåªæœ‰ä¸€ä¸ªç‚¹P, ç›¸å½“äºPå’ŒQé‡åˆï¼Œé‚£ä¹ˆè¿™æ®µç›´çº¿çš„æ–œç‡å°±æ˜¯è¿‡Pç‚¹çš„åˆ‡çº¿çš„æ–œç‡ï¼Œç›´æ¥æ±‚å¯¼ã€‚</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>3</mn><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mi mathvariant="normal">/</mi><mn>2</mn><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">k = 3x_1^2/2y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/ec_pq_same.png" alt></p><p>è¿™æ ·å¸¦å…¥ä¸Šè¿°å…¬å¼<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mo>(</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>3</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">R=(x_3,y_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>3</mn></msub><mo>=</mo><msup><mi>k</mi><mn>2</mn></msup><mo>âˆ’</mo><msub><mi>x</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_3 = k^2 - x_1 - x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>3</mn></msub><mo>=</mo><mi>k</mi><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>3</mn></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y_3 = k(x_1 - x_3) - y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>å°±èƒ½å¾—å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mn>2</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">R=2P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼äº†</p><p>å¦‚ä½•è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">3P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼å‘¢ï¼Ÿ<br>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">2P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>P</mi><mo>+</mo><mi>P</mi><mo>=</mo><mn>3</mn><mi>P</mi><mi mathvariant="normal">å°±</mi><mi mathvariant="normal">å¯</mi><mi mathvariant="normal">ä»¥</mi><mi mathvariant="normal">å•¦</mi><mi mathvariant="normal">è®¾</mi></mrow><annotation encoding="application/x-tex">2P + P = 3På°±å¯ä»¥å•¦è®¾</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord cjk_fallback">å°±</span><span class="mord cjk_fallback">å¯</span><span class="mord cjk_fallback">ä»¥</span><span class="mord cjk_fallback">å•¦</span><span class="mord cjk_fallback">è®¾</span></span></span></span>Q = 2P<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">è¿‡</mi></mrow><annotation encoding="application/x-tex">è¿‡</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">è¿‡</span></span></span></span>P$ å’Œ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span>åšç›´çº¿ï¼Œç›¸äº¤äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo mathvariant="normal">â€²</mo></msup></mrow><annotation encoding="application/x-tex">R&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span>, è¿‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo mathvariant="normal">â€²</mo></msup></mrow><annotation encoding="application/x-tex">R&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span>åš<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>è½´å‚çº¿ç›¸äº¤äºæ›²çº¿å¦å¤–ä¸€ç‚¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><br>é‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>å°±æ˜¯è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">3P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼å•¦</p><p>ä¾æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>P</mi><mo>(</mo><mi>n</mi><mo>&gt;</mo><mn>0</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">nP(n&gt;0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span>çš„å€¼</p><h4 id="ç¦»æ•£çš„ç‰¹æ€§"><a class="markdownIt-Anchor" href="#ç¦»æ•£çš„ç‰¹æ€§"></a> ç¦»æ•£çš„ç‰¹æ€§</h4><blockquote><p>æœ‰ç©ºçš„åŒå­¦åŠ¡å¿…è¦è¯•ä¸€è¯•</p></blockquote><p>æå‡ºçº¸å’Œç¬”ï¼Œè®¾å®šéšæœºç‚¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>ç”»å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>7</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">7P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„ä½ç½®ã€‚</p><p>ä½ ä¼šå‘ç°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>P</mi><mo separator="true">,</mo><mn>2</mn><mi>P</mi><mo separator="true">,</mo><mn>3</mn><mi>P</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mn>7</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">1P,2P,3P....7P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">7</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„ä½ç½®ç›¸å·®å¾ˆå¤§ï¼Œæ²¡æœ‰è§„å¾‹å¯å¾ªã€‚å¦‚æœç»™å®šä¸¤ç‚¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>ä»¥åŠ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>7</mn><mi>P</mi></mrow><annotation encoding="application/x-tex">7P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>çš„å€¼ï¼Œä½ èƒ½æ±‚å‡ºä¹˜æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>å—ï¼Ÿ<br>å³ä¾¿æ˜¯åªæœ‰7ï¼Œè¿™é‡Œçš„è®¡ç®—é‡ä¹Ÿæ˜¯å¾ˆå¤§çš„ï¼Œå¦‚æœç»™å®š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">nP</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span>(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>æ˜¯ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup><mn>56</mn></mrow><annotation encoding="application/x-tex">2^256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">5</span><span class="mord">6</span></span></span></span>çš„æ•°å­—),é‚£ä¹ˆé€†æ¨å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>çš„éš¾åº¦å°±ç›¸å½“å¤§äº†ï¼Œä»¥äººç±»æ–‡æ˜ç°æœ‰æ°´å¹³ï¼Œå¾ˆéš¾åœ¨çŸ­æ—¶é—´ï¼ˆå‡ ç™¾å¹´ï¼‰è®¡ç®—å‡ºç»“æœã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•å®‰å…¨æ€§è¿™ä¹ˆé«˜äº†ã€‚</p><h4 id="ç­¾åè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#ç­¾åè¿‡ç¨‹"></a> ç­¾åè¿‡ç¨‹</h4><p>ç”¨æˆ·æŒæœ‰å…¬é’¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span></span></span></span>å’Œç§é’¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>, ä»¥åŠåŸæ–‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span></p><h4 id="éªŒè¯è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#éªŒè¯è¿‡ç¨‹"></a> éªŒè¯è¿‡ç¨‹</h4><h2 id="ç­¾åéªŒè¯è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#ç­¾åéªŒè¯è¿‡ç¨‹"></a> ç­¾åéªŒè¯è¿‡ç¨‹</h2><p>ï¼Œæ›´å…·ä½“çš„,æ˜¯<code>secp256k1</code>æ¤­åœ†æ›²çº¿ã€‚</p><p><a href="https://en.bitcoin.it/wiki/Secp256k1" target="_blank" rel="noopener">https://en.bitcoin.it/wiki/Secp256k1</a></p><p>æ­¤æ¤­åœ†æ›²çº¿çš„æ–¹ç¨‹æ˜¯</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">y^2 = x^3 + 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span></p><p>è¿™ä¸ªæ–¹ç¨‹çš„å›¾åƒçœ‹èµ·æ¥æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/secp256k1.png" alt="secp256k1å›¾åƒ"><br><a href="https://www.desmos.com/calculator/ialhd71we3" target="_blank" rel="noopener">https://www.desmos.com/calculator/ialhd71we3</a></p><p><img src="/2019/02/16/Ethereumä»¥å¤ªåŠç­¾åéªŒè¯ç®—æ³•Javaå®ç°/mangran.jpg" alt="èŒ«ç„¶"></p><h2 id="ä»rsvä¸­åæ¨å‡ºå…¬é’¥"><a class="markdownIt-Anchor" href="#ä»rsvä¸­åæ¨å‡ºå…¬é’¥"></a> ä»r,s,vä¸­åæ¨å‡ºå…¬é’¥</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¼€å§‹ä¹‹å‰&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#å¼€å§‹ä¹‹å‰&quot;&gt;&lt;/a&gt; å¼€å§‹ä¹‹å‰&lt;/h2&gt;
&lt;p&gt;åœ¨éªŒè¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿™äº›åŸºæœ¬çš„ä¿¡æ¯: ç­¾åï¼ŒåŸæ–‡ï¼Œåœ°å€ï¼ˆæˆ–è€…å…¬é’¥ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/02/16/Eth
      
    
    </summary>
    
      <category term="ä»¥å¤ªåŠ" scheme="http://formyown.github.io/categories/%E4%BB%A5%E5%A4%AA%E5%9D%8A/"/>
    
    
      <category term="Java" scheme="http://formyown.github.io/tags/Java/"/>
    
      <category term="ä»¥å¤ªåŠ" scheme="http://formyown.github.io/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A/"/>
    
      <category term="Ethereum" scheme="http://formyown.github.io/tags/Ethereum/"/>
    
      <category term="åŠ å¯†" scheme="http://formyown.github.io/tags/%E5%8A%A0%E5%AF%86/"/>
    
  </entry>
  
</feed>
